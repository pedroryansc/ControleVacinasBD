CREATE SCHEMA ControleVacinas;

CREATE TABLE ADMINISTRADOR(
	NUMEROCNS_ADM INT NOT NULL UNIQUE,
    NOME varchar(45),
    DATANASCIMENTO date,
    CPF varchar(45),
    SENHA varchar(45),
    PRIMARY KEY(NUMEROCNS_ADM));

CREATE TABLE CIDADAO(
	NUMEROCNS_CID INT NOT NULL UNIQUE,
    NOME varchar(45),
    DATANASCIMENTO date,
    CPF varchar(45),
    PRIMARY KEY(NUMEROCNS_CID));

CREATE TABLE UNIDADESAUDE(
	ID_US INT NOT NULL UNIQUE AUTO_INCREMENT,
    NOME varchar(45),
    RUA varchar(45),
    BAIRRO varchar(45),
    CIDADE varchar(45),
    ESTADO varchar(45),
    TELEFONE varchar(45),
    PRIMARY KEY(ID_US));
    
CREATE TABLE FUNCIONARIO(
	NUMEROCNS_FUN INT NOT NULL UNIQUE,
    NOME varchar(45),
    DATANASCIMENTO date,
    CPF varchar(45),
    SENHA varchar(45),
    ID_US INT,
    PRIMARY KEY(NUMEROCNS_FUN),
    FOREIGN KEY(ID_US) references UNIDADESAUDE(ID_US));
    
CREATE TABLE LOTE(
	LOTE_CODIGO varchar(45) NOT NULL UNIQUE,
    NOMEVACINA varchar(45),
    LABORATORIO varchar(45),
    ID_US INT,
    PRIMARY KEY(LOTE_CODIGO),
    FOREIGN KEY(ID_US) references UNIDADESAUDE(ID_US));

CREATE TABLE REGISTROVACINA(
	ID_REGISTRO INT NOT NULL UNIQUE AUTO_INCREMENT,
    DATA date,
    LOTE_CODIGO varchar(45),
    NUMEROCNS_CID INT,
    NUMEROCNS_FUN INT,
    DOSE INT,
    ID_US INT,
    PRIMARY KEY(ID_REGISTRO),
    FOREIGN KEY(LOTE_CODIGO) references LOTE(LOTE_CODIGO),
    FOREIGN KEY(NUMEROCNS_CID) references CIDADAO(NUMEROCNS_CID),
    FOREIGN KEY(NUMEROCNS_FUN) references FUNCIONARIO(NUMEROCNS_FUN),
    FOREIGN KEY(ID_US) references UNIDADESAUDE(ID_US));
    
INSERT INTO administrador VALUES (2023261023, "Igor Kammer Grahl", "2005-02-14", "180.719.870-00", "12345");
INSERT INTO cidadao VALUES (2023261023, "Igor Kammer Grahl", "2005-02-14", "180.719.870-00");

INSERT INTO unidadesaude (nome, rua, bairro, cidade, estado, telefone) VALUES("Unidade Sanitária Centro", "Rua Emílio Altemburg", "Centro", "Ituporanga", "Santa Catarina", "(47) 3533-3176");

INSERT INTO funcionario VALUES(2009210109, "Irina", "1953-09-13", "050.120.050-00", "534", 1);
INSERT INTO cidadao VALUES(2009210109, "Irina", "1953-09-13", "050.120.050-00");

INSERT INTO funcionario VALUES(19770525, "Rodrigo Curvêllo", "1978-04-24", "400.289.220-00", "1234", 1);
INSERT INTO cidadao VALUES(19770525, "Rodrigo Curvêllo", "1978-04-24", "400.289.220-00");

INSERT INTO cidadao VALUES(2023004505, "Pedro Ryan Coelho Iplinski", "2005-01-05", "123.456.789-10");